#!/usr/bin/env bash
# Fast DocVault CLI wrapper that bypasses uv run when possible

# Get the directory where this script is located  
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Check if we can use the venv directly
if [[ -f "$SCRIPT_DIR/.venv/bin/dv" ]]; then
    # Use the project's virtual environment directly to avoid bytecode compilation
    exec "$SCRIPT_DIR/.venv/bin/dv" "$@"
else
    # Fall back to uv run
    exec uv run --project "$SCRIPT_DIR" dv "$@"
fi